<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <h1>여러 개의 컨텐츠, 값 조회하기</h1>

  <h3>세미나 참가자</h3>
  <ul id="seminar-persons">
    <li>이순신</li>
    <li>김유신</li>
    <li>강감찬</li>
    <li>류관순</li>
  </ul>

  <h3>수강생 리스트</h3>
  <table id="student-list" border="1" style="width: 100%;">
    <thead>
      <tr>
        <th>학번</th>
        <th>이름</th>
        <th>학과</th>
        <th>학년</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <script type="text/javascript" src="../resources/js/jquery-3.5.1.mis.js"></script>
  <script type="text/javascript">
    // 세미나 참가자를 조회해서 한명씩 콘솔에서 출력하기
    // $(선택자).each(function(index, element) {....})
    // 선택자로 선택된 엘리먼트의 갯수만큼 정의된 함수가 실행된다.
    // 함수가 실행될 때 마다 index와 element 변수에 인덱스값과 검색된 엘리먼트객체가 
    // 순서대로 전달된다.
    $('#seminar-persons li').each((index, el) => {
      console.log(index, $(el).text());
    })

    let personNames = [];
    // $(선택자).each(function() { ...this.... })
    // 지정된 함수가 실행될 때 마다 함수내의 this에는 검색된 엘리먼트 객체가 순서대로 전달된다.
    // this는 단순 엘리먼트객체다. $(this)를 실행시켜서 jQuery객체로 변환해서 사용하자.
    $('#seminar-persons li').each(function () {
      let personName = $(this).text();
      console.log(personName);

      personNames.push(personName);
    })
    console.log('참가자 배열', personNames);

    // $.each(배열, 함수)를 사용해서 자바스크립트 배열 다루기
    var students = [{
        no: 100,
        name: '홍길동',
        dept: '전자공학과',
        grade: 4
      },
      {
        no: 102,
        name: '강감찬',
        dept: '전자공학과',
        grade: 3
      },
      {
        no: 104,
        name: '김유신',
        dept: '전자공학과',
        grade: 2
      },
      {
        no: 200,
        name: '이순신',
        dept: '컴퓨터공학과',
        grade: 4
      },
      {
        no: 210,
        name: '류관순',
        dept: '컴퓨터공학과',
        grade: 1
      }

    ];

    const $tbody = $("#student-list tbody");
    $.each(students, (index, stud) => {
      $tbody.append(`<tr>
      <td>${stud.no}</td>
      <td>${stud.name}</td>
      <td>${stud.dept}</td>
      <td>${stud.grade}</td>
      </tr>`)
    })

    // 단순배열을 다루는 each의 콜백함수 내부에서 사용되는 this에는
    // 배열의 각 요소가 순서대로 전달된다.
    $.each(students, function () {
      $tbody.append(`<tr>
      <td>${this.no}</td>
      <td>${this.name}</td>
      <td>${this.dept}</td>
      <td>${this.grade}</td>
      </tr>`)
    })
  </script>
</body>

</html>